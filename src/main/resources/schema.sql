CREATE TABLE IF NOT EXISTS USERS
   (
       USER_ID integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
       USER_NAME varchar(50)  NOT NULL,
       USER_EMAIL varchar(100)  NOT NULL,
       UNIQUE(USER_EMAIL)
);

CREATE TABLE IF NOT EXISTS REQUESTS
(
    REQUEST_ID integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    REQUEST_DESCRIPTION varchar(50)  NOT NULL,
    REQUEST_REQUESTER_ID INTEGER REFERENCES USERS (USER_ID) ON DELETE CASCADE,
    REQUEST_CREATE_DATE TIMESTAMP WITHOUT TIME ZONE
);

CREATE TABLE IF NOT EXISTS ITEMS
(
    ITEM_ID integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ITEM_DESCRIPTION varchar(500)  NOT NULL,
    ITEM_NAME varchar(50)  NOT NULL,
    ITEM_IS_AVAILABLE boolean,
    ITEM_OWNER_ID INTEGER REFERENCES USERS (USER_ID) ON DELETE CASCADE,
    ITEM_REQUEST_ID INTEGER REFERENCES REQUESTS (REQUEST_ID) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS COMMENTS
(
    COMMENT_ID integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    COMMENT_TEXT varchar(500) NOT NULL,
    COMMENT_AUTHOR_ID INTEGER REFERENCES USERS (USER_ID) ON DELETE CASCADE,
    COMMENT_ITEM_ID INTEGER REFERENCES ITEMS (ITEM_ID) ON DELETE CASCADE,
    COMMENT_CREATED TIMESTAMP WITHOUT TIME ZONE
);

CREATE TABLE IF NOT EXISTS BOOKINGS
(
    BOOKING_ID integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    BOOKING_START_DATE TIMESTAMP WITHOUT TIME ZONE,
    BOOKING_END_DATE TIMESTAMP WITHOUT TIME ZONE,
    BOOKING_ITEM_ID INTEGER REFERENCES ITEMS (ITEM_ID) ON DELETE CASCADE,
    BOOKING_BOOKER_ID INTEGER REFERENCES USERS (USER_ID) ON DELETE CASCADE,
    BOOKING_STATUS varchar(50)
);
